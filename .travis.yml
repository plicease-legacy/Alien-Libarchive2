language: perl
sudo: false

install:
  - sudo apt-get update
  - sudo apt-get install libarchive-dev
  - cpanm -n Dist::Zilla
  - dzil authordeps --missing | cpanm -n
  - cpanm -n Test::CPAN::Changes Test::EOL Test::Fixme Test::NoTabs Test::Pod::Spelling::CommonMistakes Test::Spelling Test::Strict Test::Version Test::Vars || true
  - cpanm -n Alien::Libarchive::Installer Alien::bz2::Installer
  - cpanm -n FFI::Raw || true
  - cpanm -n Test::CChecker HTTP::Tiny

perl:
  - "5.8"
  - "5.10"
  - "5.12"
  - "5.14"
  - "5.16"
  - "5.18"
  - "5.20"
  - "5.22"

env:
  - ALIEN_LIBARCHIVE=share
  - ALIEN_LIBARCHIVE=system

script:
  - dzil test -v
